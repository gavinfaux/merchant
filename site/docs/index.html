<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Merchant Documentation</title>
  <link rel="icon" type="image/svg+xml" href="/site/logomark.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <script>
    // Check theme before render to prevent flash
    (function() {
      const stored = localStorage.getItem('docs-theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (stored === 'dark' || (!stored && prefersDark)) {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>
  <style>
    :root {
      --accent: #f5c747;
      --accent-hover: #e5b83d;
      
      --bg-app: #faf8f3;
      --bg-content: #ffffff;
      --bg-sidebar: #faf8f3;
      --bg-subtle: #f5f2eb;
      --bg-hover: rgba(0,0,0,0.03);
      --bg-code: #1a1a1a;
      
      --border: #ebe6db;
      --border-subtle: #f0ece3;
      
      --text: #1c1917;
      --text-secondary: #57534e;
      --text-muted: #a8a29e;
      
      /* Sidebar active (matches admin) */
      --sidebar-active-bg: #f0ece3;
      --sidebar-active-text: #1c1917;
    }
    
    .dark {
      --bg-app: #000000;
      --bg-content: #0a0a0a;
      --bg-sidebar: #0c0c0c;
      --bg-subtle: #171717;
      --bg-hover: rgba(255,255,255,0.05);
      --bg-code: #171717;
      
      --border: #262626;
      --border-subtle: #1a1a1a;
      
      --text: #fafafa;
      --text-secondary: #a3a3a3;
      --text-muted: #525252;
      
      /* Sidebar active (matches admin) */
      --sidebar-active-bg: rgba(255,255,255,0.08);
      --sidebar-active-text: #fafafa;
    }
    
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg-content);
      color: var(--text);
    }
    
    code, pre { font-family: 'IBM Plex Mono', monospace; }
    
    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
    
    /* Logo */
    .logo-icon { fill: var(--text); }
    
    /* Sidebar */
    .sidebar { background: var(--bg-sidebar); border-color: var(--border); }
    .nav-section { color: var(--text-muted); }
    .nav-link { color: var(--text-secondary); }
    .nav-link:hover { color: var(--text); background: var(--bg-hover); }
    .nav-link.active { color: var(--sidebar-active-text); background: var(--sidebar-active-bg); font-weight: 500; }
    
    /* Content */
    .content-bg { background: var(--bg-content); }
    .text-primary { color: var(--text); }
    .text-secondary { color: var(--text-secondary); }
    .text-muted { color: var(--text-muted); }
    .border-default { border-color: var(--border); }
    .border-subtle { border-color: var(--border-subtle); }
    .bg-subtle { background: var(--bg-subtle); }
    
    /* Code */
    pre { background: var(--bg-code); }
    code:not(pre code) { 
      background: var(--bg-subtle); 
      color: var(--text);
      padding: 0.125rem 0.375rem;
      border-radius: 0.25rem;
      font-size: 0.8125em;
    }
    .dark code:not(pre code) {
      background: #262626;
    }
    
    /* Syntax highlighting */
    .hl-property { color: #7ee787; }
    .hl-string { color: #a5d6ff; }
    .hl-number { color: #79c0ff; }
    .hl-keyword { color: #ff7b72; }
    
    /* Method badges */
    .method { font-size: 11px; font-weight: 600; padding: 2px 6px; border-radius: 3px; }
    .method-get { background: #dbeafe; color: #1e40af; }
    .method-post { background: #dcfce7; color: #166534; }
    .method-patch { background: #fef3c7; color: #92400e; }
    .method-delete { background: #fee2e2; color: #991b1b; }
    .dark .method-get { background: #1e3a5f; color: #93c5fd; }
    .dark .method-post { background: #14532d; color: #86efac; }
    .dark .method-patch { background: #451a03; color: #fcd34d; }
    .dark .method-delete { background: #450a0a; color: #fca5a5; }
    
    /* Cards */
    .endpoint-card { background: var(--bg-content); border: 1px solid var(--border); }
    .endpoint-header { background: var(--bg-subtle); border-bottom: 1px solid var(--border); }
    
    /* Table */
    .param-table { border: 1px solid var(--border); }
    .param-table th, .param-table td { border-bottom: 1px solid var(--border-subtle); }
    .param-table th { background: var(--bg-subtle); }
    
    /* Sections */
    section { scroll-margin-top: 80px; }
  </style>
</head>
<body class="text-sm antialiased">
  
  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 h-14 content-bg border-b border-default z-50 flex items-center px-6">
    <div class="flex items-center justify-between w-full max-w-screen-2xl mx-auto">
      <div class="flex items-center gap-6">
        <a href="/" class="flex items-center gap-2">
          <svg class="w-5 h-5 logo-icon" viewBox="0 0 88 88" xmlns="http://www.w3.org/2000/svg">
            <path d="M46 84V88H42V84H46ZM84 46V42C84 21.0132 66.9868 4 46 4H42C21.0132 4 4 21.0132 4 42V46C4 66.9868 21.0132 84 42 84V88C18.804 88 0 69.196 0 46V42C1.01484e-06 19.1665 18.221 0.588624 40.916 0.0136719L42 0H46L47.084 0.0136719C69.779 0.588625 88 19.1665 88 42V46L87.9863 47.084C87.4114 69.779 68.8335 88 46 88V84C66.9868 84 84 66.9868 84 46Z"/>
            <path d="M55.6 29C60.4 29 63.6 32.2 63.6 37V61H57.2V40.2C57.2 37 55.6 35.4 52.4 35.4C49.2 35.4 47.6 37 47.6 40.2V61H41.2V35.4H31.6V61H25.2V29H47.6V37C47.6 32.2 50.8 29 55.6 29Z"/>
          </svg>
          <span class="font-semibold text-primary">merchant</span>
        </a>
        <span class="text-muted">/</span>
        <span class="text-secondary">docs</span>
      </div>
      <div class="flex items-center gap-4">
        <a href="/docs/llms.txt" class="text-secondary hover:text-primary text-xs font-medium">llms.txt</a>
        <a href="https://github.com/withpluto/merchant" class="text-secondary hover:text-primary text-xs font-medium">GitHub</a>
        <button id="theme-toggle" class="p-1.5 rounded hover:bg-[var(--bg-hover)]" title="Toggle theme">
          <svg id="icon-light" class="w-4 h-4 text-secondary hidden" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
          <svg id="icon-dark" class="w-4 h-4 text-secondary" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
        </button>
      </div>
    </div>
  </header>

  <div class="flex pt-14">
    
    <!-- Sidebar -->
    <aside class="hidden lg:block w-56 fixed left-0 top-14 bottom-0 overflow-y-auto sidebar border-r">
      <nav class="p-4">
        
        <div class="mb-5">
          <div class="nav-section text-[10px] font-semibold uppercase tracking-wider px-3 mb-2">Getting Started</div>
          <a href="#introduction" class="nav-link block px-3 py-1.5 rounded text-[13px]">Introduction</a>
          <a href="#quickstart" class="nav-link block px-3 py-1.5 rounded text-[13px]">Quick Start</a>
          <a href="#authentication" class="nav-link block px-3 py-1.5 rounded text-[13px]">Authentication</a>
        </div>
        
        <div class="mb-5">
          <div class="nav-section text-[10px] font-semibold uppercase tracking-wider px-3 mb-2">Catalog</div>
          <a href="#products" class="nav-link block px-3 py-1.5 rounded text-[13px]">Products</a>
          <a href="#variants" class="nav-link block px-3 py-1.5 rounded text-[13px]">Variants</a>
          <a href="#inventory" class="nav-link block px-3 py-1.5 rounded text-[13px]">Inventory</a>
        </div>
        
        <div class="mb-5">
          <div class="nav-section text-[10px] font-semibold uppercase tracking-wider px-3 mb-2">Checkout</div>
          <a href="#carts" class="nav-link block px-3 py-1.5 rounded text-[13px]">Carts</a>
          <a href="#checkout" class="nav-link block px-3 py-1.5 rounded text-[13px]">Checkout</a>
          <a href="#orders" class="nav-link block px-3 py-1.5 rounded text-[13px]">Orders</a>
        </div>
        
        <div class="mb-5">
          <div class="nav-section text-[10px] font-semibold uppercase tracking-wider px-3 mb-2">Other</div>
          <a href="#images" class="nav-link block px-3 py-1.5 rounded text-[13px]">Images</a>
          <a href="#webhooks" class="nav-link block px-3 py-1.5 rounded text-[13px]">Webhooks</a>
          <a href="#errors" class="nav-link block px-3 py-1.5 rounded text-[13px]">Errors</a>
        </div>
        
      </nav>
    </aside>

    <!-- Main -->
    <main class="flex-1 lg:ml-56 min-h-screen">
      <div class="max-w-3xl mx-auto px-6 py-10">

        <!-- Introduction -->
        <section id="introduction" class="mb-14">
          <h1 class="text-2xl font-semibold text-primary mb-3">Merchant API</h1>
          <p class="text-secondary text-[15px] leading-relaxed mb-6">
            Open-source commerce backend. Connect your Stripe account, deploy to Cloudflare Workers, and start selling.
          </p>
          <div class="grid sm:grid-cols-2 gap-3">
            <div class="p-3 border border-default rounded-lg bg-subtle">
              <div class="text-[11px] text-muted uppercase tracking-wider mb-1">Base URL</div>
              <code class="text-xs">https://your-worker.workers.dev</code>
            </div>
            <div class="p-3 border border-default rounded-lg bg-subtle">
              <div class="text-[11px] text-muted uppercase tracking-wider mb-1">Version</div>
              <code class="text-xs">v1</code>
            </div>
          </div>
        </section>

        <!-- Quick Start -->
        <section id="quickstart" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Quick Start</h2>
          
          <div class="space-y-5">
            <div>
              <div class="text-xs text-muted uppercase tracking-wider mb-2">1. Clone and install</div>
              <pre class="rounded-lg p-4 overflow-x-auto text-[13px]"><code class="text-neutral-300">git clone https://github.com/withpluto/merchant
cd merchant && npm install</code></pre>
            </div>
            
            <div>
              <div class="text-xs text-muted uppercase tracking-wider mb-2">2. Initialize your store</div>
              <pre class="rounded-lg p-4 overflow-x-auto text-[13px]"><code class="text-neutral-300">npx tsx scripts/init.ts</code></pre>
              <p class="text-xs text-muted mt-2">Save the API keys — they're shown only once.</p>
            </div>
            
            <div>
              <div class="text-xs text-muted uppercase tracking-wider mb-2">3. Start the server</div>
              <pre class="rounded-lg p-4 overflow-x-auto text-[13px]"><code class="text-neutral-300">npm run dev</code></pre>
            </div>
            
            <div>
              <div class="text-xs text-muted uppercase tracking-wider mb-2">4. Connect Stripe</div>
              <pre class="rounded-lg p-4 overflow-x-auto text-[13px]"><code class="text-neutral-300">curl -X POST http://localhost:8787/v1/setup/stripe \
  -H <span class="hl-string">"Authorization: Bearer sk_your_key"</span> \
  -H <span class="hl-string">"Content-Type: application/json"</span> \
  -d <span class="hl-string">'{"stripe_secret_key":"sk_test_..."}'</span></code></pre>
            </div>
          </div>
        </section>

        <!-- Authentication -->
        <section id="authentication" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Authentication</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-4">
            All requests require a Bearer token in the Authorization header.
          </p>
          
          <pre class="rounded-lg p-4 overflow-x-auto text-[13px] mb-5"><code class="text-neutral-300">Authorization: Bearer &lt;api_key&gt;</code></pre>
          
          <table class="param-table w-full text-[13px] rounded-lg overflow-hidden">
            <thead>
              <tr>
                <th class="text-left px-3 py-2 font-medium text-secondary">Prefix</th>
                <th class="text-left px-3 py-2 font-medium text-secondary">Role</th>
                <th class="text-left px-3 py-2 font-medium text-secondary">Access</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="px-3 py-2"><code>pk_</code></td>
                <td class="px-3 py-2 text-secondary">Public</td>
                <td class="px-3 py-2 text-muted">Carts & checkout</td>
              </tr>
              <tr>
                <td class="px-3 py-2"><code>sk_</code></td>
                <td class="px-3 py-2 text-secondary">Admin</td>
                <td class="px-3 py-2 text-muted">Full access</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- Products -->
        <section id="products" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Products</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            Products are top-level catalog items. Each product has variants with individual SKUs and prices.
          </p>
          
          <!-- List -->
          <div class="endpoint-card rounded-lg mb-4 overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-get">GET</span>
              <code class="text-[13px]">/v1/products</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Returns all products with their variants.</p>
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Response</div>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"items"</span>: [
    {
      <span class="hl-property">"id"</span>: <span class="hl-string">"prod_abc123"</span>,
      <span class="hl-property">"title"</span>: <span class="hl-string">"Classic Tee"</span>,
      <span class="hl-property">"status"</span>: <span class="hl-string">"active"</span>,
      <span class="hl-property">"variants"</span>: [...]
    }
  ]
}</code></pre>
            </div>
          </div>
          
          <!-- Create -->
          <div class="endpoint-card rounded-lg mb-4 overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/products</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Creates a new product.</p>
              
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Parameters</div>
              <table class="param-table w-full text-[13px] rounded-lg overflow-hidden mb-4">
                <tbody>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs w-28 bg-subtle">title</td>
                    <td class="px-3 py-2 text-muted w-16">required</td>
                    <td class="px-3 py-2 text-secondary">Product name</td>
                  </tr>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs bg-subtle">description</td>
                    <td class="px-3 py-2 text-muted">optional</td>
                    <td class="px-3 py-2 text-secondary">Product description</td>
                  </tr>
                </tbody>
              </table>
              
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Request</div>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"title"</span>: <span class="hl-string">"Classic Tee"</span>,
  <span class="hl-property">"description"</span>: <span class="hl-string">"Premium cotton t-shirt"</span>
}</code></pre>
            </div>
          </div>
          
          <!-- Update -->
          <div class="endpoint-card rounded-lg overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-patch">PATCH</span>
              <code class="text-[13px]">/v1/products/:id</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Updates a product. All fields optional.</p>
              <table class="param-table w-full text-[13px] rounded-lg overflow-hidden">
                <tbody>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs w-28 bg-subtle">title</td>
                    <td class="px-3 py-2 text-muted w-16">optional</td>
                    <td class="px-3 py-2 text-secondary">Product name</td>
                  </tr>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs bg-subtle">status</td>
                    <td class="px-3 py-2 text-muted">optional</td>
                    <td class="px-3 py-2 text-secondary"><code>active</code> or <code>draft</code></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Variants -->
        <section id="variants" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Variants</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            Variants are purchasable SKUs with their own price and inventory.
          </p>
          
          <div class="endpoint-card rounded-lg overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/products/:id/variants</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Creates a variant. Automatically creates inventory record.</p>
              
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Parameters</div>
              <table class="param-table w-full text-[13px] rounded-lg overflow-hidden mb-4">
                <tbody>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs w-28 bg-subtle">sku</td>
                    <td class="px-3 py-2 text-muted w-16">required</td>
                    <td class="px-3 py-2 text-secondary">Unique identifier</td>
                  </tr>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs bg-subtle">title</td>
                    <td class="px-3 py-2 text-muted">required</td>
                    <td class="px-3 py-2 text-secondary">e.g. "Black / Medium"</td>
                  </tr>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs bg-subtle">price_cents</td>
                    <td class="px-3 py-2 text-muted">required</td>
                    <td class="px-3 py-2 text-secondary">Price in cents (2999 = $29.99)</td>
                  </tr>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs bg-subtle">image_url</td>
                    <td class="px-3 py-2 text-muted">optional</td>
                    <td class="px-3 py-2 text-secondary">Image URL</td>
                  </tr>
                </tbody>
              </table>
              
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Request</div>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"sku"</span>: <span class="hl-string">"TEE-BLK-M"</span>,
  <span class="hl-property">"title"</span>: <span class="hl-string">"Black / Medium"</span>,
  <span class="hl-property">"price_cents"</span>: <span class="hl-number">2999</span>
}</code></pre>
            </div>
          </div>
        </section>

        <!-- Inventory -->
        <section id="inventory" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Inventory</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            Track stock per SKU. <code>on_hand</code> is total stock, <code>reserved</code> is held for pending checkouts, <code>available</code> is what can be sold.
          </p>
          
          <!-- List -->
          <div class="endpoint-card rounded-lg mb-4 overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-get">GET</span>
              <code class="text-[13px]">/v1/inventory</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Returns inventory for all SKUs. Filter with <code>?sku=TEE-BLK-M</code>.</p>
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Response</div>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"items"</span>: [{
    <span class="hl-property">"sku"</span>: <span class="hl-string">"TEE-BLK-M"</span>,
    <span class="hl-property">"on_hand"</span>: <span class="hl-number">100</span>,
    <span class="hl-property">"reserved"</span>: <span class="hl-number">5</span>,
    <span class="hl-property">"available"</span>: <span class="hl-number">95</span>
  }]
}</code></pre>
            </div>
          </div>
          
          <!-- Adjust -->
          <div class="endpoint-card rounded-lg overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/inventory/:sku/adjust</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Adjust stock. Positive delta adds, negative removes.</p>
              
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Parameters</div>
              <table class="param-table w-full text-[13px] rounded-lg overflow-hidden mb-4">
                <tbody>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs w-28 bg-subtle">delta</td>
                    <td class="px-3 py-2 text-muted w-16">required</td>
                    <td class="px-3 py-2 text-secondary">Amount to add/remove</td>
                  </tr>
                  <tr>
                    <td class="px-3 py-2 font-mono text-xs bg-subtle">reason</td>
                    <td class="px-3 py-2 text-muted">required</td>
                    <td class="px-3 py-2 text-secondary"><code>restock</code>, <code>correction</code>, <code>damaged</code>, <code>return</code></td>
                  </tr>
                </tbody>
              </table>
              
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{ <span class="hl-property">"delta"</span>: <span class="hl-number">50</span>, <span class="hl-property">"reason"</span>: <span class="hl-string">"restock"</span> }</code></pre>
            </div>
          </div>
        </section>

        <!-- Carts -->
        <section id="carts" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Carts</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            Shopping carts expire after 30 minutes. Public keys can create and modify carts.
          </p>
          
          <!-- Create -->
          <div class="endpoint-card rounded-lg mb-4 overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/carts</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Creates a new cart.</p>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{ <span class="hl-property">"customer_email"</span>: <span class="hl-string">"buyer@example.com"</span> }</code></pre>
            </div>
          </div>
          
          <!-- Add Items -->
          <div class="endpoint-card rounded-lg overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/carts/:id/items</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Sets cart items. Replaces existing items.</p>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"items"</span>: [
    { <span class="hl-property">"sku"</span>: <span class="hl-string">"TEE-BLK-M"</span>, <span class="hl-property">"qty"</span>: <span class="hl-number">2</span> }
  ]
}</code></pre>
            </div>
          </div>
        </section>

        <!-- Checkout -->
        <section id="checkout" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Checkout</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            Creates a Stripe Checkout Session. Redirect customer to the returned URL.
          </p>
          
          <div class="endpoint-card rounded-lg overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/carts/:id/checkout</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Reserves inventory and creates Stripe session.</p>
              
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Request</div>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs mb-4"><code class="text-neutral-300">{
  <span class="hl-property">"success_url"</span>: <span class="hl-string">"https://site.com/thanks"</span>,
  <span class="hl-property">"cancel_url"</span>: <span class="hl-string">"https://site.com/cart"</span>
}</code></pre>
              
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Response</div>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"checkout_url"</span>: <span class="hl-string">"https://checkout.stripe.com/..."</span>,
  <span class="hl-property">"stripe_checkout_session_id"</span>: <span class="hl-string">"cs_..."</span>
}</code></pre>
            </div>
          </div>
        </section>

        <!-- Orders -->
        <section id="orders" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Orders</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            Orders are created automatically when Stripe payment completes. Admin key required.
          </p>
          
          <!-- List -->
          <div class="endpoint-card rounded-lg mb-4 overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-get">GET</span>
              <code class="text-[13px]">/v1/orders</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px]">Returns all orders, most recent first.</p>
            </div>
          </div>
          
          <!-- Get -->
          <div class="endpoint-card rounded-lg mb-4 overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-get">GET</span>
              <code class="text-[13px]">/v1/orders/:id</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Returns a single order.</p>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"id"</span>: <span class="hl-string">"ord_abc123"</span>,
  <span class="hl-property">"number"</span>: <span class="hl-string">"ORD-00001"</span>,
  <span class="hl-property">"status"</span>: <span class="hl-string">"paid"</span>,
  <span class="hl-property">"customer_email"</span>: <span class="hl-string">"buyer@example.com"</span>,
  <span class="hl-property">"amounts"</span>: {
    <span class="hl-property">"total_cents"</span>: <span class="hl-number">5998</span>,
    <span class="hl-property">"currency"</span>: <span class="hl-string">"USD"</span>
  },
  <span class="hl-property">"items"</span>: [...]
}</code></pre>
            </div>
          </div>
          
          <!-- Refund -->
          <div class="endpoint-card rounded-lg mb-4 overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/orders/:id/refund</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Issues refund via Stripe. Omit <code>amount_cents</code> for full refund.</p>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{ <span class="hl-property">"amount_cents"</span>: <span class="hl-number">2999</span> }</code></pre>
            </div>
          </div>
          
          <!-- Test -->
          <div class="endpoint-card rounded-lg overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/orders/test</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Creates order without Stripe. For development.</p>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"customer_email"</span>: <span class="hl-string">"test@example.com"</span>,
  <span class="hl-property">"items"</span>: [{ <span class="hl-property">"sku"</span>: <span class="hl-string">"TEE-BLK-M"</span>, <span class="hl-property">"qty"</span>: <span class="hl-number">1</span> }]
}</code></pre>
            </div>
          </div>
        </section>

        <!-- Images -->
        <section id="images" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Images</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            Upload images to R2 storage. Max 5MB. Accepts JPEG, PNG, WebP, GIF.
          </p>
          
          <!-- Upload -->
          <div class="endpoint-card rounded-lg mb-4 overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/images</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Uploads an image. Use <code>multipart/form-data</code> with <code>file</code> field.</p>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">{
  <span class="hl-property">"url"</span>: <span class="hl-string">"https://..."</span>,
  <span class="hl-property">"key"</span>: <span class="hl-string">"store_id/uuid.jpg"</span>
}</code></pre>
            </div>
          </div>
          
          <!-- Delete -->
          <div class="endpoint-card rounded-lg overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-delete">DELETE</span>
              <code class="text-[13px]">/v1/images/:key</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px]">Deletes an image. Can only delete your store's images.</p>
            </div>
          </div>
        </section>

        <!-- Webhooks -->
        <section id="webhooks" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Webhooks</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            Configure Stripe to send webhooks to <code>/v1/webhooks/stripe</code>.
          </p>
          
          <div class="endpoint-card rounded-lg overflow-hidden">
            <div class="endpoint-header px-4 py-2.5 flex items-center gap-3">
              <span class="method method-post">POST</span>
              <code class="text-[13px]">/v1/webhooks/stripe</code>
            </div>
            <div class="p-4">
              <p class="text-secondary text-[13px] mb-4">Handles <code>checkout.session.completed</code> — creates order and deducts inventory.</p>
              
              <div class="text-[10px] text-muted uppercase tracking-wider mb-2">Local Development</div>
              <pre class="rounded-lg p-3 overflow-x-auto text-xs"><code class="text-neutral-300">stripe listen --forward-to localhost:8787/v1/webhooks/stripe</code></pre>
            </div>
          </div>
        </section>

        <!-- Errors -->
        <section id="errors" class="mb-14">
          <h2 class="text-lg font-semibold text-primary mb-4">Errors</h2>
          <p class="text-secondary text-[13px] leading-relaxed mb-5">
            All errors return a consistent format with code and message.
          </p>
          
          <pre class="rounded-lg p-3 overflow-x-auto text-xs mb-5"><code class="text-neutral-300">{
  <span class="hl-property">"error"</span>: {
    <span class="hl-property">"code"</span>: <span class="hl-string">"not_found"</span>,
    <span class="hl-property">"message"</span>: <span class="hl-string">"Product not found"</span>
  }
}</code></pre>
          
          <table class="param-table w-full text-[13px] rounded-lg overflow-hidden">
            <thead>
              <tr>
                <th class="text-left px-3 py-2 font-medium text-secondary">Code</th>
                <th class="text-left px-3 py-2 font-medium text-secondary">Status</th>
                <th class="text-left px-3 py-2 font-medium text-secondary">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr><td class="px-3 py-2"><code>unauthorized</code></td><td class="px-3 py-2 text-secondary">401</td><td class="px-3 py-2 text-muted">Invalid API key</td></tr>
              <tr><td class="px-3 py-2"><code>forbidden</code></td><td class="px-3 py-2 text-secondary">403</td><td class="px-3 py-2 text-muted">Missing permission</td></tr>
              <tr><td class="px-3 py-2"><code>not_found</code></td><td class="px-3 py-2 text-secondary">404</td><td class="px-3 py-2 text-muted">Resource not found</td></tr>
              <tr><td class="px-3 py-2"><code>invalid_request</code></td><td class="px-3 py-2 text-secondary">400</td><td class="px-3 py-2 text-muted">Bad request data</td></tr>
              <tr><td class="px-3 py-2"><code>conflict</code></td><td class="px-3 py-2 text-secondary">409</td><td class="px-3 py-2 text-muted">Duplicate SKU, cart not open</td></tr>
              <tr><td class="px-3 py-2"><code>insufficient_inventory</code></td><td class="px-3 py-2 text-secondary">409</td><td class="px-3 py-2 text-muted">Not enough stock</td></tr>
            </tbody>
          </table>
        </section>

      </div>
    </main>
  </div>

  <script>
    // Theme toggle
    const toggle = document.getElementById('theme-toggle');
    const iconLight = document.getElementById('icon-light');
    const iconDark = document.getElementById('icon-dark');
    
    function updateIcons() {
      const isDark = document.documentElement.classList.contains('dark');
      iconLight.classList.toggle('hidden', !isDark);
      iconDark.classList.toggle('hidden', isDark);
    }
    
    toggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('docs-theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
      updateIcons();
    });
    
    updateIcons();
    
    // Active nav link
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-link');
    
    function updateActiveLink() {
      const scrollPos = window.scrollY + 100;
      sections.forEach(section => {
        const top = section.offsetTop;
        const height = section.offsetHeight;
        const id = section.getAttribute('id');
        if (scrollPos >= top && scrollPos < top + height) {
          navLinks.forEach(link => {
            link.classList.toggle('active', link.getAttribute('href') === '#' + id);
          });
        }
      });
    }
    
    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
  </script>

</body>
</html>
